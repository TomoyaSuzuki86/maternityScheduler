# 育休・手当スケジューラ

Doc/要件定義書.md / AGENTS.md を元に作成した、ブラウザで完結するシングルページアプリです。夫婦の月給と出産予定日を入力すると、妊娠初期から育休満了までの申請タスクと給付金のスケジュールを算出し、CSV/ICS で出力できます。

## 使い方

1. `index.html` をブラウザで直接開きます（ビルド不要）。<br>
   Windows なら `open index.html` コマンドで既定ブラウザが起動します。
2. 入力フォームに以下を入力します。
   - 妻の月給（額面）
   - 夫の月給（額面）
   - 出産予定日（YYYY-MM-DD）
   - 個別ルールパック（妊娠悪阻による休職、父の育休期間、妻の育休終了希望日）
3. 「計算する」を押すと、サマリカードと月別スケジュール表が表示されます。
4. 結果は以下のボタンで活用できます。
   - **詳細列を表示**: 簡易テーブルに詳細列を追加表示（再押下で閉じる）
   - **CSV出力**: `rules/JP_2025_Yamato.json` の列順に沿った CSV を生成
   - **ICS出力**: 申請開始・期限・振込予定を予定表として出力
   - **ブラウザに保存**: 入力値を LocalStorage に保存（次回自動復元）

## 補助機能

- **サンプル読込**: `data/sample.json` の例を読み込み、全体フローを確認できます。
- **保存データ削除**: LocalStorage の情報をクリアします。
- スケジュール表は簡易表示→詳細表示の切り替えと横スクロールに対応しています。

## ルールとカスタマイズ

- 給付条件や提出先、参考 URL は `rules/JP_2025_Yamato.json` に集約しています。
  需要に応じて数値・文言を編集してください。
- `app.js` 冒頭の `BUILTIN_RULES` はファイル読み込み失敗時のフォールバックです。
  通常は JSON が優先されます。

## 既知の注意点

- ブラウザ環境でのテストを想定しています。計算ロジックの単体テストは同梱していません。
- 収入や給付の丸めは概算（標準報酬月額=月給/30）で計算しています。実際の通知と差異が出る場合があります。
- 多胎・父1年育休など Doc/要件定義書.md の前提に基づいた実装です。前提変更時はロジック調整が必要です。

## 開発メモ

- 主要処理は `app.js` に集約。DOM 初期化後に `init()` が走り、LocalStorage を自動復元します。
- CSV/ICS 出力はその場で生成してダウンロードリンクをクリックする仕組みです。
- ブラウザのコンソールにエラーが出た場合は、`rules/JP_2025_Yamato.json` の編集ミスや日付入力ミスを確認してください。
