# 目的（このアプリでやること）

二人の月給（額面）と出産予定日を入れるだけで、妊娠1週目から育休満期までの「申請タスク」と「入金見込み（手取り相当）」を自動で並べたスケジュールを出力する。双子・共働き・父は出産直後から1年育休取得の前提に対応。

---

# 本バージョンの前提

* 多胎（双子）
* 夫：出産直後（出生日翌日）から1年間の育児休業を取得
* 妻：産前産後休業 → その後の育児休業（長さは設定可）
* 二人とも正社員・雇用保険加入、健康保険は被用者保険（協会けんぽ等）想定
* 2025年4月開始の「出生後休業支援給付金（最大28日・上乗せ13％）」に対応
* 神奈川県大和市在住、分娩医療機関は北里大学病院（直接支払制度 事前申請可）

> ※個別ルールパック（ともさん・むちょさん用）を同梱：
>
> * 休職：2025/10/13開始（妊娠悪阻）→ 傷病手当金の判定と計算を有効化
> * 出産予定日：入力値を基準に自動計算（例：2026/04/30）

---

# インプット（ユーザーが入れるのは3つだけ）

1. 妻の月給（額面）
2. 夫の月給（額面）
3. 出産予定日（YYYY-MM-DD）

> オプション（既定はON：個別ルールパック）
>
> * 妊娠悪阻による休職の有無・開始日（既定：2025-10-13・3か月想定）
> * 夫の育休開始日（既定：出生日翌日）と期間（既定：1年）
> * 妻の育休終了予定（既定：1歳到達前日まで／延長判定は別ロジック）

---

# 出力（スケジュールの列仕様）

## 簡易テーブル表示（初期表示）

- 初期表示は簡易列（タイトル / 年月 / 種別 / 名称 / 金額見込み(円) / 備考）のみを表示する。
- 詳細列は「詳細列を表示」ボタンで展開し、再度押下すると閉じる。
- 簡易テーブルと詳細テーブルはともに左右20pxのマージン内で表示し、列が収まらない場合は横スクロールで閲覧できる。

CSV/画面共通の列。後でDBにそのまま入れられる形。

* 年/月（YYYY-MM）
* 種別（給付 / 手当 / 申請 / 医療 / 税・社保 / その他）
* 金額（円）※給付見込みは「非課税・手取り相当」と注記
* 制度カテゴリ（健康保険 / 雇用保険 / 自治体 / 会社 / 医療機関）
* 対象者（妻 / 夫）
* 期間開始（日付）
* 期間終了（日付）
* 申請開始可能日（日付）
* 申請期限（日付）
* 提出先（種別：会社 / 健康保険組合 / ハローワーク / 市役所 / 病院）
* 提出先（名称：例 協会けんぽ神奈川支部、ハローワーク大和、北里大学病院）
* 提出方法（窓口 / 郵送 / オンライン）
* 必要書類（カンマ区切り：申請書, 医師意見書, 出生証明書, 母子手帳写し, 本人確認, 振込口座, 事業主証明 など）
* 支給率（％）
* 対象日数（数値）
* 支給単位（開始/終了：日付）
* 振込予定日（日付）
* 実入金日（日付）
* 実入金額（円）
* ステータス（未着手 / 準備中 / 申請中 / 差戻し / 決定 / 入金済）
* 差戻し理由（テキスト）
* 問い合わせ先（電話/URL）
* 根拠URL（公的ページ）

---

# 制度ロジック（計算と期限）

**A. 傷病手当金（健康保険）**

* 条件：業務外の傷病で就労不能、連続3日待機、4日目以降支給。給与支給がある場合は差額調整。
* 日額：標準報酬日額×2/3。
* 期間：休職期間中（産前休業に入る前日まで）。
* 提出先：健康保険（協会けんぽ等）／方法：郵送推奨（神奈川支部）。
* 必要書類：傷病手当金支給申請書（医師記入欄・事業主証明）。
* 申請タイミング：1〜3か月ごとに分割申請可。

**B. 出産手当金（健康保険）**

* 対象期間：多胎は産前98日＋産後56日（出産日を産前に含む）。予定日超過分は産前に加算。
* 日額：標準報酬日額×2/3。会社給与があれば調整。
* 申請：産前分・産後分の分割可。事業主証明が毎回必要。
* 提出先：健康保険（郵送）。

**C. 出産育児一時金（健康保険）**

* 金額：50万円×児数（標準）。
* 方式：病院への直接支払制度（北里：事前申請可）。
* 申請：妊娠22週以降〜入院前に同意書提出（病院窓口）。

**D. 育児休業給付金（雇用保険）**

* 支給率：開始〜180日＝67％、181日〜＝50％（いずれも額面基準・非課税）。
* 支給単位：1か月ごと。就業は単位期間で10日/80時間超は不支給。
* 申請：会社→ハローワークへ2か月に1回が実務標準。期限＝各単位期間の初日から4か月経過の月末。
* 父は出生日翌日から1年連続の育休を前提に自動分割（67％→50％境目を自動計算）。

**E. 出生時育児休業給付金（産後パパ育休）**

* 期間：出生後8週間内で最大28日（2分割可）。
* 支給率：67％。
* 申請：育児休業給付と別枠。期限＝出生（又は予定日）8週後の翌日から2か月経過の月末。

**F. 出生後休業支援給付金（2025/4〜）**

* 上乗せ：対象28日間に13％を加算し実効80％（非課税・保険料免除で手取り10割相当）。
* 要件：本人が対象期間内に14日以上の休業。配偶者要件は原則「配偶者も14日以上」だが、父については「配偶者が産後休業中」等の例外あり。母も、産後休業後に育休へ入り、父の14日取得があれば適用可。
* 本アプリでは、父は出生直後から連続育休→父側は自動適用。母側は産後8週終了後、16週経過までに開始した最初の28日分へ自動適用。

**G. 社会保険料の免除**

* 産前産後休業・育児休業中は、健康保険・厚生年金の本人・会社負担とも免除。会社が年金事務所へ届出（育児休業等取得者申出書）。
* 月末が育休期間に含まれる月が免除対象（14日例外ルールあり）。

**H. 自治体（大和市）**

* 母子健康手帳交付・妊婦健診券：妊娠届出時。窓口は大和市「すくすく子育て課」。
* 出生届・出生連絡票：出生後14日以内。児童医療証なども同時案内。

---

# 計算仕様（数式）

* 標準報酬月額（SRM）：入力の月給（額面）をそのまま近似利用（厳密な等級は将来対応）。
* 標準報酬日額（SRD）＝SRM / 30
* 傷病手当金日額＝SRD×2/3（給与支給があれば差額控除）
* 出産手当金日額＝SRD×2/3（同上）
* 育児休業給付金：

  * 0〜180日：SRD×日数×0.67
  * 181日〜：SRD×日数×0.50
* 出生後休業支援給付金（上乗せ）：該当28日間に SRD×日数×0.13 を加算（要件充足時）。
* 手取り相当：いずれも非課税・社保免除を前提に、給付額＝手取りにほぼ一致と注記。

---

# 期限計算（代表例）

* 出生時育児休業給付金：出生（or 予定日）8週後の翌日から2か月経過の月末までに申請。
* 育児休業給付金：各支給単位期間の初日から4か月経過の月末までに申請。
* 出産手当金：産前分・産後分を分割可。支給対象期間終了後に随時。保険者の定めに従い郵送提出。
* 母子手帳・健診券：妊娠届出時に即日。
* 出生届：出生後14日以内。

---

# 提出先マスタ（初期値）

* 健康保険：全国健康保険協会 神奈川支部（宛先郵便番号 220-8538／郵送推奨）
* ハローワーク：ハローワーク大和（神奈川県大和市深見西3-3-21／046-260-8609）
* 自治体：大和市 すくすく子育て課（保健福祉センター2階）
* 医療機関：北里大学病院（分娩費 直接支払制度 同意書を22週〜入院前に提出）

---

# タイムライン生成アルゴリズム（擬似コード）

```
inputs: wife_salary, husband_salary, due_date
const twins = true
const father_leave = { start: birth_date+1day, end: birth_date+1year }
const mother_maternity = { prenatal: 98days before birth (twins), postnatal: 56days after birth }
const mother_childcare = { start: end_of_postnatal, end: configurable }

// 1) 重要日付
birth_date := due_date (初期)   // 実際の出生日は後で上書き可能
maternity_prenatal_start := birth_date - 98d
maternity_postnatal_end := birth_date + 56d
father_childcare_start := birth_date + 1d
father_childcare_end := birth_date + 1y

// 2) 給付ブロック（妻）
if has_sickleave:
  add block: SickLeave (start=2025-10-13, end=min(maternity_prenatal_start-1, 3 months)), amount=SRD_wife*2/3*days
add block: MaternityAllowance prenatal
add block: MaternityAllowance postnatal
add block: ChildcareAllowance (mother) with 67%/50%分割
add block: PostBirthSupport(13%) for first 28 days within mother_target_window (start>=postnatal_end and <= due/birth +16w)

// 3) 給付ブロック（夫）
add block: ChildcareAllowance (father) 1year with 67%/50%分割
add block: PostBirthSupport(13%) for first 28 days within 8w after birth (父は配偶者が産後休業中→要件充足)

// 4) 自治体・医療タスク
add tasks: 妊娠届/母子手帳, 北里 直接支払 同意書, 出生届/連絡票 等

// 5) 各ブロックを1か月単位に集計→CSV行を生成
for each month between (pregnancy_week1) and (father_childcare_end):
  aggregate amounts by scheme, compute申請開始日/期限/提出先/書類
  set 支給単位期間 and 入金予定（会社提出→2か月ごと基準 目安日）
```

---

# UI要件（ざっくり）

* 入力フォーム（3項目＋オプション）→［計算する］
* 結果画面：

  * 月別のカード表示＋CSVエクスポート
  * 行クリックで「提出先・必要書類・根拠URL」を展開
  * ステータス変更（未着手→入金済）
  * スケジュール表は簡易テーブルを初期表示し、詳細列は「詳細列を表示」ボタンで追加表示（再押下で閉じる）。

---

# 今後の実装ノート

* 標準報酬月額の等級丸め・上限/下限の厳密化（雇用保険の上限日額反映）
* 父母の同時就業（10日・80時間）チェック
* 実出生日での再計算（予定日超過・早産の調整）
* 入金予定日のヒューリスティクス（会社の申請サイクルを学習）
* 大和市の個別メニュー（応援ギフト、児童手当、医療証等）の自動展開
